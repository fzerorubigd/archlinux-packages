# Maintainer: FzerorubigD <Fzerorubigd {AT} GMail {DOT} com>
pkgname=cow-proxy
pkgver=0.9.5
pkgrel=1
pkgdesc="HTTP proxy written in Go. COW can automatically identify blocked sites and use parent proxies to access"
arch=('i686' 'x86_64' 'armv5tel' 'armv6l' 'armv7l')
url="https://github.com/cyfdecyf/cow"
license=('custom')
depends=()
makedepends=()
conflicts=(cow-proxy-git)

source=(cow@.service
        cow_user.service)
source_x86_64+=(cow-x86_64-$pkgver.gz::http://dl.chenyufei.info/cow/latest/cow-linux64-$pkgver.gz)
source_i686+=(cow-i686-$pkgver.gz::http://dl.chenyufei.info/cow/latest/cow-linux32-$pkgver.gz)
source_armv5tel+=(cow-armv5tl-$pkgver.gz::http://dl.chenyufei.info/cow/latest/cow-linux-armv5tel-$pkgver.gz)
source_armv6l+=(cow-armv6l-$pkgver.gz::http://dl.chenyufei.info/cow/latest/cow-linux-armv6l-$pkgver.gz)
source_armv7l+=(cow-armv7l-$pkgver.gz::http://dl.chenyufei.info/cow/latest/cow-linux-armv7l-$pkgver.gz)

sha1sums=('3efa6f55e51bed4043ac7a5804469bdd38032359'
          'ee250fdebc73255effd6219d0d8089990c9c73bd')
sha1sums_i686=('c124aa13d51f815429cffae0526e2a3141985dc4')
sha1sums_x86_64=('c124aa13d51f815429cffae0526e2a3141985dc4')
sha1sums_armv5tel=('5d942a5b30a4278b2c5ba7713575e895953010c6')
sha1sums_armv6l=('3a0e818ffe98ede8563810ea33022dd6132f659a')
sha1sums_armv7l=('b5574697ccdd3484416cc7033fea7ab0be159447')

install=$pkgname.install

package() {
  mkdir -p $pkgdir/usr/bin
  install -m755 $srcdir/cow-$CARCH-$pkgver $pkgdir/usr/bin/cow
  install -Dm644 cow@.service ${pkgdir}/usr/lib/systemd/system/cow@.service
  install -Dm644 cow_user.service ${pkgdir}/usr/lib/systemd/user/cow.service
}
